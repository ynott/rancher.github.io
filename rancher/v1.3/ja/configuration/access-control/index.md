* * *

title: Rancher におけるアクセスコントロール layout: rancher-default-v1.3 version: v1.3 lang: ja redirect_from: - /rancher/latest/en/configuration/access-control/

* * *

## ## アクセスコントロール

### アクセスコントロールとは?

アクセスコントロールではあなたの Rancher インスタンスに対しアクセス権限を持つユーザーをどのように制限するかを設定します。 デフォルトではアクセスコントロールは設定されておらず、 Rancher インスタンスの IP アドレスを知っている人であれば誰でも利用し、 API にもアクセスすることができます。 つまり、あなたの Rancher インスタンスは全世界に公開されていることになります! そのため、Rancher を起動後はすぐにアクセスコントロールの設定をするよう強く推奨しています。 アクセスコントロールを有効にすることで必要に応じて Rancher インスタンスを共有することができ、 その際インスタンスにアクセスするためには認証が必要となります。 また、API に関しても有効な API キーを持っている人のみがアクセス可能となります。

Rancher における最初の認証用アカウントは **管理者** アカウントとなり、 詳細は [管理者の権限]({{site.baseurl}}/rancher/{{page.version}}/{{page.lang}}/configuration/access-control/#admin) を参照してください。

### アクセスコントロールの有効化

**管理者** タブより **アクセスコントロール** をクリックします。

Rancher インスタンスを認証後、アクセスコントロールは有効化されます。 アクセスコントロールが有効化されている場合、様々な [環境]({{site.baseurl}}/rancher/{{page.version}}/{{page.lang}}/environments/) を管理し異なるグループの人々と共有することができるようになります。

アクセスコントロールが有効化されている場合、API はロックされユーザー認証、もしくは[API キー]({{site.baseurl}}/rancher/{{page.version}}/{{page.lang}}/api/api-keys/) が必要となります。

#### Active Directory

**Active Directory** アイコンを選択します。 もし Active Directory で TLS を利用したい場合、[適切な証明書を利用して Rancher サーバーを起動]({{site.baseurl}}/rancher/{{page.version}}/{{page.lang}}/installing-rancher/installing-server/#ldap) していることを確認してください。 各項目を入力し **認証** をクリックすることで Rancher を認証します。 Active Directory が有効化されている場合、認証済みのユーザー名で自動的にログイン処理がされます。 または Rancher の管理者としてログインすることもできます。

#### Azure AD

**Azure AD** アイコンを選択します。 各項目を入力し **Azure で認証** をクリックすることで Rancher を認証します。 Active Directory が有効化されている場合、認証済みのユーザー名で自動的にログイン処理がされます。 または Rancher の管理者としてログインすることもできます。

#### GitHub

**GitHub** アイコンを選択し、UI の指示に従い Rancher を GitHub のアプリケーションとして登録します。 **GitHub アカウントで認証** をクリックした後、アクセスコントロールは有効化され自動的に GitHub のログインアカウントまたは Rancher の管理者として Rancher にログインされます。

#### ローカル認証

ローカル認証では Rancher 内のデータベースに格納される独自のアカウントを作成できます。

**Local** アイコンを選択します。 **ログインユーザー名** と **姓名**, **パスワード** を入力し管理者ユーザーを作成します。 **ローカル認証を有効化** をクリックしローカル認証を有効化します。 このボタンをクリックすることで、管理者が作成されデータベースに格納されます。 Rancher インスタンスへのログインは自動的に処理され作成された管理者アカウントでログインされます。

#### OpenLDAP

**OpenLDAP** アイコンを選択します。 OpenLDAP で TLS を利用したい場合は [Rancher サーバーで適切な証明書が利用されていることを確認してください]({{site.baseurl}}/rancher/{{page.version}}/{{page.lang}}/installing-rancher/installing-server/#ldap)。 各項目を入力し **認証** をクリックすることで Rancher を認証します。 OpenLDAP が有効化されると認証されたユーザー名で自動的にログインされ、 Rancher の管理者アカウントとしてもログインされます。

#### シボレス

**Shibboleth** アイコンを選択します。シボレスアカウントに関する設定項目を入力し情報を **保存** した後、 **テスト** を実施することでアクセスコントロールが動作します。

シボレスでは妥当性チェックの際に注意するべき既知の問題があります。

* 検索やルックアップのサポートはされません。ユーザーを追加する際、アクセスを許可するユーザー ID を正確に入力する必要があります。
* [環境]({{site.baseurl}}/rancher/{{page.version}}/{{page.lang}}/environments/) にユーザーを追加する際、グループのメンバーであるアクセスコントロールを有効化した管理者以外はグループ ID はサポートされません。

### サイトアクセス

認証のタイプにより Rancher は異なるレベルのサイトアクセスを提供します。

#### Active Directory/GitHub/シボレス

AD もしくは GitHub で認証する場合、3つのオプションが利用可能です。

* **全てのユーザーを許可** - GitHub や Active Directory の全てのユーザーが Rancher に対しアクセス可能です。 これは GitHub の全てのユーザーが利用可能であるため **非推奨** です。
* **環境のメンバーと認証済みユーザー、組織を許可** - 環境のメンバーもしくはオーナーであるユーザー、*認証済みユーザーと組織* リストに追加されている全てのユーザーがアクセス可能です。
* **認証済みユーザーと組織のみアクセス許可** - *認証済みユーザーと組織* に追加されているユーザーのみ Rancher インスタンスにアクセス可能です。 たとえ環境に追加されているユーザーであっても *認証済みユーザーと組織* **にも** 追加されていないとアクセスすることができません。

Rancher インスタンスへのアクセス権限は [ユーザー]({{site.baseurl}}/rancher/{{page.version}}/{{page.lang}}/configuration/accounts/#users) 権限として与えられ、 これらは **管理者** タブを確認することができません。 そのため確認するためには [管理者アカウント]({{site.baseurl}}/rancher/{{page.version}}/{{page.lang}}/configuration/accounts/#admin) に変更する必要があります。

また、ユーザーが他の [環境]({{site.baseurl}}/rancher/{{page.version}}/{{page.lang}}/environments/) を確認するためにはユーザーを対象の環境の [オーナー]({{site.baseurl}}/rancher/{{page.version}}/{{page.lang}}/environments/#owners) に追加する必要があります。

#### Azure AD/OpenLDAP

Azure AD や OpenLDAP ではセットアップされた全てのユーザーが Rancher のサイトにアクセスすることが可能です。

#### ローカル認証

ローカル認証が有効化されている場合は **管理者** > **アカウント** タブにアクセスすることで管理者が追加の管理者/ユーザーを作成することができます。 **アカウントを追加** をクリックし、追加したいアカウントの詳細情報を入力します。 また、アカウントタイプを **管理者** もしくは **ユーザー** から選択することができ、 管理者は **管理者** タブにアクセスすることができますがユーザーにはタブは表示されません。

アカウントが作成されると、管理者/ユーザーは全ての環境に追加することが可能です。

### アカウントタイプ

アカウントタイプはアカウントが管理者タブにアクセスできるかどうかを決定します。 Rancher における各環境では対象の環境に対して異なるアクセスレベルを提供する [メンバーシップロール]({{site.baseurl}}/rancher/{{page.version}}/{{page.lang}}/environments/#membership-roles) が存在します。

#### 管理者

最初に Rancher によって認証されるユーザーが Rancher の管理者になり、管理者のみ **管理者** タブにアクセスする権限を持ちます。

環境を管理する際、管理者はたとえ管理者が対象環境のメンバーに追加されていなくても Rancher 内の全ての [環境]({{site.baseurl}}/rancher/{{page.version}}/{{page.lang}}/environments/) を参照することができます。 管理者の環境のドロップダウンメニューではメンバーシップリストに記載されているメンバーのみが環境を参照することができます。

管理者は他のユーザーを Rancher の管理者に追加することができます。 追加されたユーザーは Rancher へのログイン後 **管理者** > **アカウント** ページからユーザーのロールを変更することができます。 **管理者** > **アカウント** タブで **編集** をクリック後、アカウントタイプを *管理者* に変更し **保存** をクリックします。

#### ユーザー

Rancher で認証されたユーザー以外の他のユーザーは自動的にユーザー権限を与えられ、これらのユーザーには **管理者** タブが表示されません。

また、メンバーとして所属している環境のみ参照することができます。

### アクセスコントロールの無効化

アクセスコントロールを無効化したい場合は **アクセスコントロールを無効化** ボタンをクリックします。 これにより Rancher インスタンスが全世界に公開され全ての人が API にアクセスすることとなるため 無効化されることは **推奨されません**。